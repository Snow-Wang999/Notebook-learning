# 7-1-æ•°æ®æ¸…ç†-å¤„ç†ç¼ºå¤±å€¼

åˆ é™¤ç¼ºå°‘çš„å€¼ï¼Œæˆ–ä½¿ç”¨è‡ªåŠ¨å·¥ä½œæµå¡«å……å®ƒä»¬ã€‚

æ¬¢è¿å‚åŠ Kaggle Learnä¸Šçš„æ•°æ®æ¸…ç†è¯¾ç¨‹ï¼ 

æ•°æ®æ¸…ç†æ˜¯æ•°æ®ç§‘å­¦çš„ä¸€ä¸ªå…³é”®éƒ¨åˆ†ï¼Œä½†å®ƒå¯èƒ½ä¼šä»¤äººæ·±æ„Ÿæ²®ä¸§ã€‚ä¸ºä»€ä¹ˆä½ çš„ä¸€äº›æ–‡æœ¬å­—æ®µä¼šä¹±ç ï¼Ÿå¯¹äºè¿™äº›ç¼ºå¤±çš„å€¼ï¼Œæ‚¨åº”è¯¥æ€ä¹ˆåšï¼Ÿä¸ºä»€ä¹ˆæ—¥æœŸæ ¼å¼ä¸æ­£ç¡®ï¼Ÿå¦‚ä½•å¿«é€Ÿæ¸…ç†ä¸ä¸€è‡´çš„æ•°æ®è¾“å…¥ï¼Ÿåœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œæ‚¨å°†äº†è§£ä¸ºä»€ä¹ˆä¼šé‡åˆ°è¿™äº›é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ï¼ 

åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•è§£å†³ä¸€äº›æœ€å¸¸è§çš„æ•°æ®æ¸…ç†é—®é¢˜ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ›´å¿«åœ°å®é™…åˆ†ææ•°æ®ã€‚æ‚¨å°†ä½¿ç”¨çœŸå®ã€æ··ä¹±çš„æ•°æ®å®Œæˆäº”ä¸ªåŠ¨æ‰‹ç»ƒä¹ ï¼Œå¹¶å›ç­”ä¸€äº›æœ€å¸¸è§çš„æ•°æ®æ¸…ç†é—®é¢˜ã€‚ 

åœ¨æœ¬ç¬”è®°æœ¬ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å¤„ç†ç¼ºå¤±çš„å€¼ã€‚

## å…ˆçœ‹çœ‹æ•°æ® 

æˆ‘ä»¬éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯åŠ è½½æˆ‘ä»¬å°†ä½¿ç”¨çš„åº“å’Œæ•°æ®é›†ã€‚ 

 ä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç¾å›½è¶³çƒæ¯”èµ›ä¸­å‘ç”Ÿçš„äº‹ä»¶æ•°æ®é›†ã€‚åœ¨ä¸‹é¢çš„ç»ƒä¹ ä¸­ï¼Œæ‚¨å°†æŠŠæ–°æŠ€èƒ½åº”ç”¨äºæ—§é‡‘å±±é¢å‘çš„å»ºç­‘è®¸å¯è¯æ•°æ®é›†ã€‚

```python
# modules we'll use
import pandas as pd
import numpy as np

# read in all our data
nfl_data = pd.read_csv("../input/nflplaybyplay2009to2016/NFL Play by Play 2009-2017 (v4).csv")

# set seed for reproducibility
np.random.seed(0) 
```

```
/opt/conda/lib/python3.7/site-packages/IPython/core/interactiveshell.py:3444: DtypeWarning: Columns (25,51) have mixed types.Specify dtype option on import or set low_memory=False.
  exec(code_obj, self.user_global_ns, self.user_ns)
```

å½“ä½ å¾—åˆ°ä¸€ä¸ªæ–°çš„æ•°æ®é›†æ—¶ï¼Œé¦–å…ˆè¦åšçš„å°±æ˜¯çœ‹çœ‹å…¶ä¸­çš„ä¸€äº›ã€‚è¿™å¯ä»¥è®©æ‚¨çœ‹åˆ°æ‰€æœ‰æ•°æ®éƒ½æ­£ç¡®è¯»å–ï¼Œå¹¶äº†è§£æ•°æ®çš„æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ˜¯å¦æœ‰ä»»ä½•ç¼ºå¤±çš„å€¼ï¼Œè¿™äº›å€¼å°†ç”¨NaNæˆ–Noneè¡¨ç¤ºã€‚

```python
# look at the first five rows of the nfl_data file. 
# I can see a handful of missing data already!
nfl_data.head()
```

![image-20221218140911819](C:\Users\Myste\AppData\Roaming\Typora\typora-user-images\image-20221218140911819.png)

æ˜¯çš„ï¼Œçœ‹èµ·æ¥ç¼ºå°‘ä¸€äº›å€¼ã€‚

## æˆ‘ä»¬æœ‰å¤šå°‘ç¼ºå¤±çš„æ•°æ®ç‚¹ï¼Ÿ

å¥½çš„ï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬ç¡®å®ç¼ºå°‘äº†ä¸€äº›å€¼ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æ¯åˆ—æœ‰å¤šå°‘ä¸ªã€‚

```python
# get the number of missing data points per column
missing_values_count = nfl_data.isnull().sum()

# look at the # of missing points in the first ten columns
missing_values_count[0:10]
```

```
Date                0
GameID              0
Drive               0
qtr                 0
down            61154
time              224
TimeUnder           0
TimeSecs          224
PlayTimeDiff      444
SideofField       528
dtype: int64
```

è¿™ä¼¼ä¹å¤ªå¤šäº†ï¼çœ‹çœ‹æˆ‘ä»¬æ•°æ®é›†ä¸­ç¼ºå¤±çš„å€¼çš„ç™¾åˆ†æ¯”å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ï¼Œä»è€Œè®©æˆ‘ä»¬æ›´å¥½åœ°äº†è§£è¿™ä¸ªé—®é¢˜çš„è§„æ¨¡ï¼š

```python
# how many total missing values do we have?
total_cells = np.product(nfl_data.shape)
total_missing = missing_values_count.sum()

# percent of data that is missing
percent_missing = (total_missing/total_cells) * 100
print(percent_missing)
```

```
24.87214126835169
```

å“‡ï¼Œè¿™ä¸ªæ•°æ®é›†ä¸­å‡ ä¹å››åˆ†ä¹‹ä¸€çš„å•å…ƒæ ¼æ˜¯ç©ºçš„ï¼åœ¨ä¸‹ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å°†ä»”ç»†æŸ¥çœ‹ä¸€äº›ç¼ºå°‘å€¼çš„åˆ—ï¼Œå¹¶å°è¯•æ‰¾å‡ºå®ƒä»¬å¯èƒ½å‘ç”Ÿäº†ä»€ä¹ˆã€‚

## æ‰¾å‡ºæ•°æ®ä¸¢å¤±çš„åŸå› 

è¿™å°±æ˜¯æˆ‘ä»¬è¿›å…¥æ•°æ®ç§‘å­¦çš„ä¸€éƒ¨åˆ†çš„æ—¶å€™ï¼Œæˆ‘å–œæ¬¢ç§°ä¹‹ä¸ºâ€œæ•°æ®ç›´è§‰â€ï¼Œæˆ‘çš„æ„æ€æ˜¯â€œçœŸæ­£åœ°çœ‹ä½ çš„æ•°æ®ï¼Œå¹¶è¯•å›¾å¼„æ¸…æ¥šä¸ºä»€ä¹ˆå®ƒæ˜¯è¿™æ ·çš„ï¼Œä»¥åŠè¿™å°†å¦‚ä½•å½±å“ä½ çš„åˆ†æâ€ã€‚è¿™å¯èƒ½æ˜¯æ•°æ®ç§‘å­¦ä¸­ä»¤äººæ²®ä¸§çš„ä¸€éƒ¨åˆ†ï¼Œç‰¹åˆ«æ˜¯å¦‚æœä½ å¯¹è¿™ä¸€é¢†åŸŸæ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ²¡æœ‰å¤ªå¤šç»éªŒçš„è¯ã€‚ä¸ºäº†å¤„ç†ç¼ºå°‘çš„å€¼ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ç›´è§‰æ¥æ‰¾å‡ºç¼ºå°‘å€¼çš„åŸå› ã€‚ä¸ºäº†å¸®åŠ©è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥é—®è‡ªå·±æœ€é‡è¦çš„é—®é¢˜ä¹‹ä¸€æ˜¯ï¼š

> æ­¤å€¼æ˜¯å¦å› ä¸ºæœªè®°å½•æˆ–ä¸å­˜åœ¨è€Œä¸¢å¤±ï¼Ÿ

å¦‚æœæŸä¸ªå€¼å› ä¸ºä¸å­˜åœ¨è€Œä¸¢å¤±ï¼ˆä¾‹å¦‚æ²¡æœ‰å­©å­çš„äººçš„æœ€å¤§å­©å­çš„èº«é«˜ï¼‰ï¼Œé‚£ä¹ˆå°è¯•çŒœæµ‹å®ƒå¯èƒ½æ˜¯ä»€ä¹ˆæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚è¿™äº›å€¼å¯èƒ½éœ€è¦ä¿ç•™ä¸º`NaN`ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæŸä¸ªå€¼ç”±äºæœªè®°å½•è€Œä¸¢å¤±ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å°è¯•æ ¹æ®è¯¥åˆ—å’Œè¡Œä¸­çš„å…¶ä»–å€¼çŒœæµ‹å®ƒå¯èƒ½æ˜¯ä»€ä¹ˆã€‚è¿™è¢«ç§°ä¸º**æ’è¡¥**ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°†å­¦ä¹ å¦‚ä½•è¿›è¡Œæ’è¡¥ï¼ï¼šï¼‰

è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­ã€‚æŸ¥çœ‹`nfl_data`æ•°æ®å¸§ä¸­ç¼ºå¤±å€¼çš„æ•°é‡ï¼Œæˆ‘æ³¨æ„åˆ°`"TimesSec"`åˆ—ä¸­æœ‰å¾ˆå¤šç¼ºå¤±å€¼ï¼š

```python
# look at the # of missing points in the first ten columns
missing_values_count[0:10]
```

```
Date                0
GameID              0
Drive               0
qtr                 0
down            61154
time              224
TimeUnder           0
TimeSecs          224
PlayTimeDiff      444
SideofField       528
dtype: int64
```

é€šè¿‡æŸ¥çœ‹æ–‡æ¡£([the documentation](https://www.kaggle.com/maxhorowitz/nflplaybyplay2009to2016))ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°æœ¬ä¸“æ ä¸­åŒ…å«äº†æœ‰å…³æ¸¸æˆå®Œæˆæ—¶å‰©ä½™ç§’æ•°çš„ä¿¡æ¯ã€‚è¿™æ„å‘³ç€è¿™äº›å€¼å¯èƒ½æ˜¯å› ä¸ºå®ƒä»¬æ²¡æœ‰è¢«è®°å½•ï¼Œè€Œä¸æ˜¯å› ä¸ºå®ƒä»¬ä¸å­˜åœ¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥å°è¯•çŒœæµ‹å®ƒä»¬åº”è¯¥æ˜¯ä»€ä¹ˆï¼Œè€Œä¸æ˜¯ä»…ä»…å°†å®ƒä»¬ä½œä¸ºNAã€‚ 

å¦ä¸€æ–¹é¢ï¼Œè¿˜æœ‰å…¶ä»–é¢†åŸŸï¼Œå¦‚`"PenalizedTeam"`ï¼Œä¹Ÿæœ‰å¾ˆå¤šç¼ºå¤±çš„é¢†åŸŸã€‚ç„¶è€Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœºåœ°æ˜¯ç¼ºå¤±çš„ï¼Œå› ä¸ºå¦‚æœæ²¡æœ‰å¤„ç½šï¼Œé‚£ä¹ˆè¯´å“ªæ”¯çƒé˜Ÿè¢«å¤„ç½šæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚å¯¹äºè¯¥åˆ—ï¼Œå°†å…¶ç•™ç©ºæˆ–æ·»åŠ ç¬¬ä¸‰ä¸ªå€¼ï¼ˆå¦‚â€œä¸¤è€…éƒ½ä¸â€ï¼‰å¹¶ä½¿ç”¨è¯¥å€¼æ›¿æ¢NAå°†æ›´æœ‰æ„ä¹‰ã€‚

> æç¤ºï¼šå¦‚æœæ‚¨è¿˜æ²¡æœ‰é˜…è¯»æ•°æ®é›†æ–‡æ¡£ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åœ°æ–¹ï¼å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ä»å¦ä¸€ä¸ªäººé‚£é‡Œè·å¾—çš„æ•°æ®é›†ï¼Œæ‚¨ä¹Ÿå¯ä»¥å°è¯•è”ç³»ä»–ä»¬ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚

å¦‚æœæ‚¨æ­£åœ¨è¿›è¡Œéå¸¸ä»”ç»†çš„æ•°æ®åˆ†æï¼Œé‚£ä¹ˆæ­¤æ—¶æ‚¨å°†å•ç‹¬æŸ¥çœ‹æ¯ä¸€åˆ—ï¼Œä»¥æ‰¾å‡ºå¡«è¡¥è¿™äº›ç¼ºå¤±å€¼çš„æœ€ä½³ç­–ç•¥ã€‚åœ¨æœ¬ç¬”è®°æœ¬çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€äº›â€œå¿«é€Ÿè€Œè‚®è„â€çš„æŠ€æœ¯ï¼Œè¿™äº›æŠ€æœ¯å¯ä»¥å¸®åŠ©æ‚¨å¤„ç†ä¸¢å¤±çš„å€¼ï¼Œä½†æœ€ç»ˆå¯èƒ½ä¼šåˆ é™¤ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯æˆ–ä¸ºæ•°æ®æ·»åŠ ä¸€äº›å™ªå£°ã€‚

## åˆ é™¤ç¼ºå°‘çš„å€¼ 

å¦‚æœä½ å¾ˆç€æ€¥æˆ–è€…æ²¡æœ‰ç†ç”±å¼„æ¸…æ¥šä½ çš„å€¼ç¼ºå¤±çš„åŸå› ï¼Œä½ å¯ä»¥é€‰æ‹©åˆ é™¤ä»»ä½•åŒ…å«ç¼ºå¤±å€¼çš„è¡Œæˆ–åˆ—ã€‚ï¼ˆæ³¨æ„ï¼šæˆ‘é€šå¸¸ä¸å»ºè®®åœ¨é‡è¦é¡¹ç›®ä¸­ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼**èŠ±æ—¶é—´ä»”ç»†æŸ¥çœ‹æ•°æ®ï¼Œå¹¶é€ä¸€æŸ¥çœ‹æ‰€æœ‰ç¼ºå°‘å€¼çš„åˆ—ï¼Œä»¥çœŸæ­£äº†è§£æ•°æ®é›†é€šå¸¸æ˜¯å€¼å¾—çš„ã€‚**ï¼‰ 

å¦‚æœæ‚¨ç¡®å®šè¦åˆ é™¤ç¼ºå°‘å€¼çš„è¡Œï¼Œpandaç¡®å®æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„å‡½æ•°`dropna()`æ¥å¸®åŠ©æ‚¨åšåˆ°è¿™ä¸€ç‚¹ã€‚è®©æˆ‘ä»¬åœ¨NFLæ•°æ®é›†ä¸Šè¯•è¯•å§ï¼

```python
# remove all the rows that contain a missing value
nfl_data.dropna()
```

![image-20221218140853654](C:\Users\Myste\AppData\Roaming\Typora\typora-user-images\image-20221218140853654.png)

å“¦ï¼Œå¤©å“ªï¼Œçœ‹èµ·æ¥æˆ‘ä»¬çš„æ•°æ®éƒ½è¢«åˆ é™¤äº†ï¼ğŸ˜± è¿™æ˜¯å› ä¸ºæ•°æ®é›†ä¸­çš„æ¯ä¸€è¡Œéƒ½è‡³å°‘ç¼ºå°‘ä¸€ä¸ªå€¼ã€‚æˆ‘ä»¬å¯èƒ½ä¼šæ›´å¹¸è¿åœ°åˆ é™¤è‡³å°‘ç¼ºå°‘ä¸€ä¸ªå€¼çš„æ‰€æœ‰åˆ—ã€‚

```python
# remove all columns with at least one missing value
#åˆ é™¤è‡³å°‘ç¼ºå°‘ä¸€ä¸ªå€¼çš„æ‰€æœ‰åˆ—
columns_with_na_dropped = nfl_data.dropna(axis=1)
columns_with_na_dropped.head()
```

![image-20221218140938870](C:\Users\Myste\AppData\Roaming\Typora\typora-user-images\image-20221218140938870.png)

```python
# just how much data did we lose?
print("Columns in original dataset: %d \n" % nfl_data.shape[1])
print("Columns with na's dropped: %d" % columns_with_na_dropped.shape[1])
```

```
Columns in original dataset: 102 

Columns with na's dropped: 41
```

æˆ‘ä»¬ä¸¢å¤±äº†ç›¸å½“å¤šçš„æ•°æ®ï¼Œä½†æ­¤æ—¶æˆ‘ä»¬å·²ç»æˆåŠŸåœ°ä»æ•°æ®ä¸­åˆ é™¤äº†æ‰€æœ‰`NaN`ã€‚

## è‡ªåŠ¨å¡«å†™ç¼ºå¤±å€¼ 

å¦ä¸€ç§é€‰æ‹©æ˜¯å°è¯•å¡«å†™ç¼ºå¤±çš„å€¼ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†è·å¾—NFLæ•°æ®çš„ä¸€å°éƒ¨åˆ†ï¼Œä»¥ä¾¿æ‰“å°è‰¯å¥½ã€‚

```python
# get a small subset of the NFL dataset
subset_nfl_data = nfl_data.loc[:, 'EPA':'Season'].head()
subset_nfl_data
```

![image-20221218141039377](C:\Users\Myste\AppData\Roaming\Typora\typora-user-images\image-20221218141039377.png)

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Pandaçš„`fillna()`å‡½æ•°ä¸ºæˆ‘ä»¬å¡«å……æ•°æ®å¸§ä¸­ç¼ºå¤±çš„å€¼ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ªé€‰é¡¹æ˜¯æŒ‡å®šè¦ç”¨ä»€ä¹ˆæ›¿æ¢ `NaN` å€¼ã€‚è¿™é‡Œï¼Œæˆ‘æƒ³ç”¨0æ›¿æ¢æ‰€æœ‰`NaN`å€¼ã€‚

```python
# replace all NA's with 0
subset_nfl_data.fillna(0)
```

![image-20221218141118633](C:\Users\Myste\AppData\Roaming\Typora\typora-user-images\image-20221218141118633.png)

æˆ‘ä¹Ÿå¯ä»¥æ›´èªæ˜ä¸€ç‚¹ï¼Œå°†ç¼ºå¤±çš„å€¼æ›¿æ¢ä¸ºåŒä¸€åˆ—ä¸­ç´§éšå…¶åçš„ä»»ä½•å€¼ã€‚ï¼ˆè¿™å¯¹äºè§‚å¯Ÿç»“æœå…·æœ‰æŸç§é€»è¾‘é¡ºåºçš„æ•°æ®é›†å¾ˆæœ‰æ„ä¹‰ã€‚ï¼‰

```python
# replace all NA's the value that comes directly after it in the same column, 
# then replace all the remaining na's with 0
#å°†æ‰€æœ‰NAæ›¿æ¢ä¸ºåŒä¸€åˆ—ä¸­ç´§æ¥å…¶åçš„å€¼ï¼Œ
#ç„¶åç”¨0æ›¿æ¢æ‰€æœ‰å‰©ä½™çš„na
subset_nfl_data.fillna(method='bfill', axis=0).fillna(0)
```

![image-20221218141319069](C:\Users\Myste\AppData\Roaming\Typora\typora-user-images\image-20221218141319069.png)

## è½®åˆ°ä½ äº† 

ç¼–å†™è‡ªå·±çš„ä»£ç æ¥å¤„ç†æ—§é‡‘å±±é¢å‘çš„å»ºç­‘è®¸å¯è¯æ•°æ®é›†ä¸­çš„ç¼ºå¤±å€¼ã€‚ 

## Exercise: Handling Missing Values

åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œæ‚¨å°†åº”ç”¨åœ¨å¤„ç†ç¼ºå¤±å€¼æ•™ç¨‹ä¸­å­¦ä¹ çš„å†…å®¹ã€‚

### å®‰è£…ç¨‹åº 

ä»¥ä¸‹é—®é¢˜å°†ä¸ºæ‚¨çš„å·¥ä½œæä¾›åé¦ˆã€‚è¿è¡Œä»¥ä¸‹å•å…ƒæ ¼ä»¥è®¾ç½®åé¦ˆç³»ç»Ÿã€‚

```python
from learntools.core import binder
binder.bind(globals())
from learntools.data_cleaning.ex1 import *
print("Setup Complete")
```

### 1ï¼‰ å…ˆçœ‹çœ‹æ•°æ® 

è¿è¡Œä¸‹ä¸€ä¸ªä»£ç å•å…ƒä»¥åŠ è½½åˆ°ç”¨äºå®Œæˆç»ƒä¹ çš„åº“å’Œæ•°æ®é›†ä¸­ã€‚

```python
# modules we'll use
import pandas as pd
import numpy as np

# read in all our data
sf_permits = pd.read_csv("../input/building-permit-applications-data/Building_Permits.csv")

# set seed for reproducibility
np.random.seed(0) 
```

ä½¿ç”¨ä¸‹é¢çš„ä»£ç å•å…ƒæ ¼æ‰“å°`sf_permits` `DataFrame` çš„å‰äº”è¡Œã€‚

```python
sf_permits.head()
```

![image-20221218142533229](C:\Users\Myste\AppData\Roaming\Typora\typora-user-images\image-20221218142533229.png)

æ•°æ®é›†æ˜¯å¦ç¼ºå°‘ä»»ä½•å€¼ï¼Ÿä¸€æ—¦ä½ æœ‰äº†ç­”æ¡ˆï¼Œè¯·è¿è¡Œä¸‹é¢çš„ä»£ç å•å…ƒï¼Œä»¥è·å¾—ä½ çš„å·¥ä½œã€‚

```python
# Check your answer (Run this code cell to receive credit!)
q1.check()
```

å¯¹çš„ï¼š æ•°æ®çš„å‰äº”è¡Œç¡®å®æ˜¾ç¤ºæœ‰å‡ åˆ—ç¼ºå°‘å€¼ã€‚æ‚¨å¯ä»¥åœ¨â€œè¡—é“ç¼–å·åç¼€â€ã€â€œæ‹Ÿå®šæ–½å·¥ç±»å‹â€å’Œâ€œç°åœºè®¸å¯è¯â€ç­‰æ ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚

### 2ï¼‰ æˆ‘ä»¬æœ‰å¤šå°‘ç¼ºå¤±çš„æ•°æ®ç‚¹ï¼Ÿ 

æ•°æ®é›†ä¸­ç¼ºå°‘å¤šå°‘ç™¾åˆ†æ¯”çš„å€¼ï¼Ÿæ‚¨çš„ç­”æ¡ˆåº”è¯¥æ˜¯ä»‹äº0å’Œ100ä¹‹é—´çš„æ•°å­—ã€‚ï¼ˆå¦‚æœæ•°æ®é›†ä¸­ç¼ºå°‘1/4çš„å€¼ï¼Œåˆ™ç­”æ¡ˆä¸º25ã€‚ï¼‰

```python
# TODO: Your code here!
total_columns = np.product(sf_permits.shape)
total_missing = sf_permits.isnull().sum().sum()
percent_missing = ( total_missing / total_columns )*100
print(percent_missing)

# Check your answer
q2.check()
```

```
26.26002315058403
```

Correct

### 3ï¼‰ æ‰¾å‡ºæ•°æ®ä¸¢å¤±çš„åŸå›  

æŸ¥çœ‹æ—§é‡‘å±±å»ºç­‘è®¸å¯è¯æ•°æ®é›†( [San Francisco Building Permits dataset](https://www.kaggle.com/aparnashastry/building-permit-applications-data))ä¸­çš„â€œè¡—é“ç¼–å·åç¼€â€(**"Street Number Suffix"**)å’Œâ€œé‚®æ”¿ç¼–ç â€(**"Zipcode"**)åˆ—ã€‚è¿™ä¸¤ä¸ªéƒ½åŒ…å«ç¼ºå¤±çš„å€¼ã€‚ 

- å“ªä¸€ä¸ªï¼Œå¦‚æœæœ‰çš„è¯ï¼Œæ˜¯å› ä¸ºå®ƒä»¬ä¸å­˜åœ¨è€Œç¼ºå¤±çš„ï¼Ÿ 

- å“ªä¸€ä¸ªï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æ˜¯å› ä¸ºæ²¡æœ‰è®°å½•è€Œä¸¢å¤±çš„ï¼Ÿ 

ä¸€æ—¦ä½ æœ‰äº†ç­”æ¡ˆï¼Œè¿è¡Œä¸‹é¢çš„ä»£ç å•å…ƒã€‚

```python
# Check your answer (Run this code cell to receive credit!)
q3.check()
```

å¦‚æœâ€œè¡—é“å·åç¼€â€åˆ—ä¸­çš„å€¼ç¼ºå¤±ï¼Œå¯èƒ½æ˜¯å› ä¸ºå®ƒä¸å­˜åœ¨ã€‚å¦‚æœâ€œZipcodeâ€åˆ—ä¸­ç¼ºå°‘å€¼ï¼Œåˆ™è¡¨ç¤ºæœªè®°å½•è¯¥å€¼ã€‚

### 4ï¼‰ åˆ é™¤ç¼ºå°‘çš„å€¼ï¼šè¡Œ 

å¦‚æœåˆ é™¤äº†æ‰€æœ‰ç¼ºå°‘å€¼çš„`sf_permit`è¡Œï¼Œè¿˜å‰©å¤šå°‘è¡Œï¼Ÿ æ³¨æ„ï¼šé€‰ä¸­æ­¤é¡¹æ—¶ï¼Œä¸è¦æ›´æ”¹`sf_permits`çš„å€¼ã€‚

```python
# TODO: Your code here!
columns_with_na_dropped = sf_permits.dropna(axis=0)
columns_with_na_dropped.head()
```

ä¸€æ—¦ä½ æœ‰äº†ç­”æ¡ˆï¼Œè¿è¡Œä¸‹é¢çš„ä»£ç å•å…ƒã€‚

```python
# Check your answer (Run this code cell to receive credit!)
q4.check()
```

å¯¹çš„ï¼š æ•°æ®é›†ä¸­æ²¡æœ‰å‰©ä½™çš„è¡Œï¼

### 5ï¼‰ åˆ é™¤ç¼ºå°‘çš„å€¼ï¼šåˆ— 

ç°åœ¨å°è¯•åˆ é™¤æ‰€æœ‰å…·æœ‰ç©ºå€¼çš„åˆ—ã€‚ 

- åˆ›å»ºä¸€ä¸ªåä¸º`sf_permits_with_na_drop`çš„æ–°æ•°æ®å¸§ï¼Œå…¶ä¸­åˆ é™¤äº†æ‰€æœ‰ç©ºå€¼åˆ—ã€‚ 

- ä»åŸå§‹`sf_permits` DataFrameä¸­åˆ é™¤äº†å¤šå°‘åˆ—ï¼Ÿä½¿ç”¨æ­¤æ•°å­—è®¾ç½®ä¸‹é¢`dropped_columns`å˜é‡çš„å€¼ã€‚

```python
# TODO: Your code here
sf_permits_with_na_dropped = sf_permits.dropna(axis=1)
dropped_columns = sf_permits.shape[1]-sf_permits_with_na_dropped.shape[1]
print(dropped_columns)

# Check your answer
q5.check()
```

```
31
```

Correct

### 6ï¼‰ è‡ªåŠ¨å¡«å……ç¼ºå°‘çš„å€¼ 

å°è¯•å°†`sf_permits`æ•°æ®ä¸­çš„æ‰€æœ‰`NaN`æ›¿æ¢ä¸ºç´§éšå…¶åçš„`NaN`ï¼Œç„¶åç”¨0æ›¿æ¢ä»»ä½•å‰©ä½™çš„`NaN`ã€‚å°†ç»“æœè®¾ç½®ä¸ºæ–°çš„`DataFrame`  `sf_permits_with_na_inped`ã€‚

```python
# TODO: Your code here
sf_permits_with_na_imputed = sf_permits.fillna(method='bfill', axis=0).fillna(0)

# Check your answer
q6.check()
```



### æ›´å¤šç»ƒä¹  

å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾å¤„ç†ç¼ºå¤±å€¼çš„æ›´å¤šç»ƒä¹ ï¼š

- æŸ¥çœ‹æœ¬è®°äº‹æœ¬([this noteboook](https://www.kaggle.com/alexisbcook/missing-values))ï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨scikit learnçš„æ’è¡¥å™¨å¤„ç†ç¼ºå¤±å€¼ã€‚ 
- å›å¤´çœ‹çœ‹`sf_permits`æ•°æ®é›†ä¸­çš„â€œZipcodeâ€åˆ—ï¼Œå…¶ä¸­ç¼ºå°‘ä¸€äº›å€¼ã€‚ä½ å°†å¦‚ä½•è®¡ç®—æ¯ä¸ªåœ°å€çš„å®é™…é‚®ç¼–ï¼Ÿï¼ˆæ‚¨å¯ä»¥å°è¯•ä½¿ç”¨å¦ä¸€ä¸ªæ•°æ®é›†ã€‚æ‚¨å¯ä»¥åœ¨â€œæ•°æ®é›†â€åˆ—è¡¨( [Datasets listing](https://www.kaggle.com/datasets))ä¸­æœç´¢æœ‰å…³æ—§é‡‘å±±çš„æ•°æ®é›†ã€‚ï¼‰

### ç»§ç»­å‰è¿› 

åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œå­¦ä¹ å¦‚ä½•åº”ç”¨ç¼©æ”¾å’Œæ ‡å‡†åŒ–æ¥è½¬æ¢æ•°æ®ã€‚